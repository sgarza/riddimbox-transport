{"version":3,"file":"index.esm.bundle.js","sources":["../src/transport.js","../node_modules/rollup-plugin-node-builtins/src/es6/events.js","../node_modules/tap-tempo/index.js","../src/metronome.js","../src/constants.js","../src/providers/tone-transport-provider.js","../src/providers/tone-metronome-provider.js"],"sourcesContent":["class Transport {\n  static _provider = null;\n\n  static get provider() {\n    Transport._throwIfProviderNotSet();\n    return Transport._provider;\n  }\n\n  static set provider(provider) {\n    Transport._provider = provider;\n  }\n\n  static get state() {\n    return Transport.provider.state;\n  }\n\n  static get bpm() {\n    return Transport.provider.bpm;\n  }\n\n  static set bpm(bpm) {\n    Transport.provider.bpm = bpm;\n  }\n\n  static get swing() {\n    return Transport.provider.swing;\n  }\n\n  static set swing(swing) {\n    Transport.provider.swing = swing;\n  }\n\n  static get swingSubdivision() {\n    return Transport.provider.swingSubdivision;\n  }\n\n  static set swingSubdivision(swingSubdivision) {\n    Transport.provider.swingSubdivision = swingSubdivision;\n  }\n\n  static get timeSignature() {\n    return Transport.provider.timeSignature;\n  }\n\n  static set timeSignature(timeSignature) {\n    Transport.provider.timeSignature = timeSignature;\n  }\n\n  static get ticks() {\n    return Transport.provider.ticks;\n  }\n\n  static get beats() {\n    return Transport.provider.beats;\n  }\n\n  static get bars() {\n    return Transport.provider.bars;\n  }\n\n  static on(event, listener) {\n    return Transport.provider.on(event, listener);\n  }\n\n  static start() {\n    Transport.provider.start();\n  }\n\n  static stop() {\n    Transport.provider.stop();\n  }\n\n  static _throwIfProviderNotSet() {\n    if (!Transport._provider) {\n      throw new Error(\n        \"You need to set a provider first. Try with the ToneTransportProvider class.\"\n      );\n    }\n  }\n}\n\nexport default Transport;\n","'use strict';\n\nvar domain;\n\n// This constructor is used to store event handlers. Instantiating this is\n// faster than explicitly calling `Object.create(null)` to get a \"clean\" empty\n// object (tested with v8 v4.9).\nfunction EventHandlers() {}\nEventHandlers.prototype = Object.create(null);\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nexport default EventEmitter;\nexport {EventEmitter};\n\n// nodejs oddity\n// require('events') === require('events').EventEmitter\nEventEmitter.EventEmitter = EventEmitter\n\nEventEmitter.usingDomains = false;\n\nEventEmitter.prototype.domain = undefined;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\nEventEmitter.init = function() {\n  this.domain = null;\n  if (EventEmitter.usingDomains) {\n    // if there is an active domain, then attach to it.\n    if (domain.active && !(this instanceof domain.Domain)) {\n      this.domain = domain.active;\n    }\n  }\n\n  if (!this._events || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = new EventHandlers();\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || isNaN(n))\n    throw new TypeError('\"n\" argument must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\n// These standalone emit* functions are used to optimize calling of event\n// handlers for fast cases because emit() itself often has a variable number of\n// arguments and can be deoptimized because of that. These functions always have\n// the same number of arguments and thus do not get deoptimized, so the code\n// inside them can execute faster.\nfunction emitNone(handler, isFn, self) {\n  if (isFn)\n    handler.call(self);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self);\n  }\n}\nfunction emitOne(handler, isFn, self, arg1) {\n  if (isFn)\n    handler.call(self, arg1);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1);\n  }\n}\nfunction emitTwo(handler, isFn, self, arg1, arg2) {\n  if (isFn)\n    handler.call(self, arg1, arg2);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2);\n  }\n}\nfunction emitThree(handler, isFn, self, arg1, arg2, arg3) {\n  if (isFn)\n    handler.call(self, arg1, arg2, arg3);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].call(self, arg1, arg2, arg3);\n  }\n}\n\nfunction emitMany(handler, isFn, self, args) {\n  if (isFn)\n    handler.apply(self, args);\n  else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      listeners[i].apply(self, args);\n  }\n}\n\nEventEmitter.prototype.emit = function emit(type) {\n  var er, handler, len, args, i, events, domain;\n  var needDomainExit = false;\n  var doError = (type === 'error');\n\n  events = this._events;\n  if (events)\n    doError = (doError && events.error == null);\n  else if (!doError)\n    return false;\n\n  domain = this.domain;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    er = arguments[1];\n    if (domain) {\n      if (!er)\n        er = new Error('Uncaught, unspecified \"error\" event');\n      er.domainEmitter = this;\n      er.domain = domain;\n      er.domainThrown = false;\n      domain.emit('error', er);\n    } else if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      // At least give some kind of context to the user\n      var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n      err.context = er;\n      throw err;\n    }\n    return false;\n  }\n\n  handler = events[type];\n\n  if (!handler)\n    return false;\n\n  var isFn = typeof handler === 'function';\n  len = arguments.length;\n  switch (len) {\n    // fast cases\n    case 1:\n      emitNone(handler, isFn, this);\n      break;\n    case 2:\n      emitOne(handler, isFn, this, arguments[1]);\n      break;\n    case 3:\n      emitTwo(handler, isFn, this, arguments[1], arguments[2]);\n      break;\n    case 4:\n      emitThree(handler, isFn, this, arguments[1], arguments[2], arguments[3]);\n      break;\n    // slower\n    default:\n      args = new Array(len - 1);\n      for (i = 1; i < len; i++)\n        args[i - 1] = arguments[i];\n      emitMany(handler, isFn, this, args);\n  }\n\n  if (needDomainExit)\n    domain.exit();\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n\n  events = target._events;\n  if (!events) {\n    events = target._events = new EventHandlers();\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (!existing) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] :\n                                          [existing, listener];\n    } else {\n      // If we've already got an array, just append.\n      if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n    }\n\n    // Check for listener leak\n    if (!existing.warned) {\n      m = $getMaxListeners(target);\n      if (m && m > 0 && existing.length > m) {\n        existing.warned = true;\n        var w = new Error('Possible EventEmitter memory leak detected. ' +\n                            existing.length + ' ' + type + ' listeners added. ' +\n                            'Use emitter.setMaxListeners() to increase limit');\n        w.name = 'MaxListenersExceededWarning';\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        emitWarning(w);\n      }\n    }\n  }\n\n  return target;\n}\nfunction emitWarning(e) {\n  typeof console.warn === 'function' ? console.warn(e) : console.log(e);\n}\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction _onceWrap(target, type, listener) {\n  var fired = false;\n  function g() {\n    target.removeListener(type, g);\n    if (!fired) {\n      fired = true;\n      listener.apply(target, arguments);\n    }\n  }\n  g.listener = listener;\n  return g;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function')\n    throw new TypeError('\"listener\" argument must be a function');\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function')\n        throw new TypeError('\"listener\" argument must be a function');\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      list = events[type];\n      if (!list)\n        return this;\n\n      if (list === listener || (list.listener && list.listener === listener)) {\n        if (--this._eventsCount === 0)\n          this._events = new EventHandlers();\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length; i-- > 0;) {\n          if (list[i] === listener ||\n              (list[i].listener && list[i].listener === listener)) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (list.length === 1) {\n          list[0] = undefined;\n          if (--this._eventsCount === 0) {\n            this._events = new EventHandlers();\n            return this;\n          } else {\n            delete events[type];\n          }\n        } else {\n          spliceOne(list, position);\n        }\n\n        if (events.removeListener)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events;\n\n      events = this._events;\n      if (!events)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (!events.removeListener) {\n        if (arguments.length === 0) {\n          this._events = new EventHandlers();\n          this._eventsCount = 0;\n        } else if (events[type]) {\n          if (--this._eventsCount === 0)\n            this._events = new EventHandlers();\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        for (var i = 0, key; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = new EventHandlers();\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners) {\n        // LIFO order\n        do {\n          this.removeListener(type, listeners[listeners.length - 1]);\n        } while (listeners[0]);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  var evlistener;\n  var ret;\n  var events = this._events;\n\n  if (!events)\n    ret = [];\n  else {\n    evlistener = events[type];\n    if (!evlistener)\n      ret = [];\n    else if (typeof evlistener === 'function')\n      ret = [evlistener.listener || evlistener];\n    else\n      ret = unwrapListeners(evlistener);\n  }\n\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? Reflect.ownKeys(this._events) : [];\n};\n\n// About 1.5x faster than the two-arg version of Array#splice().\nfunction spliceOne(list, index) {\n  for (var i = index, k = i + 1, n = list.length; k < n; i += 1, k += 1)\n    list[i] = list[k];\n  list.pop();\n}\n\nfunction arrayClone(arr, i) {\n  var copy = new Array(i);\n  while (i--)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","var EventEmitter = require('events').EventEmitter\n\nmodule.exports = function(){\n  var tapTempo = new EventEmitter()\n\n  var timeout = 2000\n\n  var times = []\n  var lastTime = null\n  var lastDifference = null\n\n  tapTempo.tap = function(){\n    var time = Date.now()\n    if (lastTime){\n      lastDifference = time - lastTime\n      times.push(lastDifference)\n      refresh()\n    }\n    lastTime = time\n    beginTimeout()\n    tapTempo.emit('tap')\n  }\n\n  function refresh(){\n    if (times.length > 2){\n      var average = times.reduce(function(result, t){ return result += t }) / times.length\n      var bpm = (1 / (average / 1000)) * 60\n      tapTempo.emit('tempo', bpm)\n    }\n  }\n\n  var timer = null\n  function beginTimeout(){\n    clearTimeout(timer)\n    timer = setTimeout(function(){\n      times = [lastDifference]\n      lastTime = null\n    }, timeout)\n  }\n\n  return tapTempo\n}","import TapTempo from \"tap-tempo\";\n\nconst tapTempo = TapTempo();\n\nclass Metronome {\n  constructor(provider) {\n    if (!provider) {\n      throw new Error(\n        \"You need to set a provider first. Try with the ToneMetronomeProvider class.\"\n      );\n    }\n\n    this.provider = provider;\n    this.tapTempo = tapTempo;\n\n    this.tapTempo.on(\"tempo\", this._onTapTempoHandler);\n  }\n\n  connect(audioNode) {\n    this.provider.connect(audioNode);\n  }\n\n  tap() {\n    this.tapTempo.tap();\n  }\n\n  _onTapTempoHandler(tempo) {\n    this.provider.transport.bpm = parseInt(tempo, 10);\n  }\n}\n\nexport default Metronome;\n","export default {\n  TRANSPORT_STARTED: \"started\",\n  TRANSPORT_STOPPED: \"stopped\",\n  DEFAULT_BPM_VALUE: 120,\n  DEFAULT_SWING_VALUE: 0,\n  DEFAULT_SWING_SUBDIVISION_VALUE: 8,\n  DEFAULT_TIME_SIGNATURE_VALUE: [4, 4],\n  MIN_TICKS: 0,\n  MAX_TICKS: 191,\n  PPQN: 192\n};\n","import EventEmmiter from \"events\";\n\nimport constants from \"../constants\";\nconst { DEFAULT_TIME_SIGNATURE_VALUE, PPQN } = constants;\n\nclass ToneTransportProvider extends EventEmmiter {\n  constructor(Tone) {\n    super();\n    this.engine = Tone;\n    this._timeSignature = DEFAULT_TIME_SIGNATURE_VALUE;\n    this._ticks = 0;\n    this._beats = 0;\n    this._bars = 0;\n\n    Tone.Transport.scheduleRepeat(this._tickHandler, \"1i\");\n  }\n\n  get state() {\n    return this.engine.Transport.state;\n  }\n\n  get bpm() {\n    return this.engine.Transport.bpm.value;\n  }\n\n  set bpm(bpm) {\n    this.engine.Transport.bpm.value = bpm;\n  }\n\n  get swing() {\n    return Math.round(this.engine.Transport.swing * 100);\n  }\n\n  set swing(swing) {\n    this.engine.Transport.swing = swing / 100;\n  }\n\n  get swingSubdivision() {\n    return parseInt(this.engine.Transport.swingSubdivision, 10);\n  }\n\n  set swingSubdivision(swingSubdivision) {\n    const validSubdivisions = [8, 16];\n\n    if (!validSubdivisions.includes(swingSubdivision)) {\n      throw new Error(\"Invalid subdivision value\");\n    }\n\n    this.engine.Transport.swingSubdivision = `${swingSubdivision}n`;\n  }\n\n  get timeSignature() {\n    return this._timeSignature;\n  }\n\n  set timeSignature(timeSignature) {\n    this._validateTimeSignature(timeSignature);\n    this._timeSignature = timeSignature;\n    this.engine.Transport.timeSignature = timeSignature;\n  }\n\n  get ticks() {\n    return this._ticks % PPQN;\n  }\n\n  get beats() {\n    return this._beats % this.timeSignature[0];\n  }\n\n  get bars() {\n    return this._bars % this.timeSignature[1];\n  }\n\n  start() {\n    this.engine.Transport.start();\n    this.emit(\"bar\", this.bars);\n    this.emit(\"beat\", this.beats);\n    this.emit(\"tick\", this.ticks);\n  }\n\n  stop() {\n    this.engine.Transport.stop();\n  }\n\n  _validateTimeSignature(timeSignature) {\n    const validBars = [4, 8];\n    if (!Array.isArray(timeSignature)) {\n      throw new Error(\"Time signature must an array, ex: [4, 4]\");\n    }\n\n    if (timeSignature.length !== 2) {\n      throw new Error(\n        \"Time signature must an array of 2 positions, ex: [4, 4]\"\n      );\n    }\n\n    if (!validBars.includes(timeSignature[1])) {\n      throw new Error(\"Invalid time signature\");\n    }\n  }\n\n  _tickHandler = () => {\n    this._ticks += 1;\n\n    if (this._ticks % PPQN === 0) {\n      this._beats += 1;\n\n      if (this._beats % this.timeSignature[0] === 0) {\n        this._bars += 1;\n        this.emit(\"bar\", this.bars);\n      }\n\n      this.emit(\"beat\", this.beats);\n    }\n\n    this.emit(\"tick\", this.ticks);\n  };\n}\n\nexport default ToneTransportProvider;\n","class ToneMetronomeProvider {\n  constructor(Transport) {\n    this.transport = Transport;\n    this.engine = Transport.provider.engine;\n    this.synth = new this.engine.Synth({\n      oscillator: {\n        type: \"pwm\",\n        modulationFrequency: 0.2\n      },\n      envelope: {\n        attack: 0.01,\n        decay: 0.1,\n        sustain: 0.05,\n        release: 0.05\n      }\n    });\n\n    const repeatEachBarSubdivision = `${this.transport.timeSignature[1]}n`;\n\n    this.engine.Transport.scheduleRepeat(\n      this._repeatHandler,\n      repeatEachBarSubdivision\n    );\n  }\n\n  connect(audioNode) {\n    this.synth.connect(audioNode);\n  }\n\n  _repeatHandler = time => {\n    if (this.transport.beats === 0) {\n      this.synth.triggerAttackRelease(\"G4\", \"16n\", time);\n    } else {\n      this.synth.triggerAttackRelease(\"C4\", \"16n\", time);\n    }\n  };\n}\n\nexport default ToneMetronomeProvider;\n"],"names":["Transport","event","listener","provider","on","start","stop","_provider","Error","_throwIfProviderNotSet","state","bpm","swing","swingSubdivision","timeSignature","ticks","beats","bars","EventEmitter","require$$0","tapTempo","TapTempo","Metronome","_onTapTempoHandler","audioNode","connect","tap","tempo","transport","parseInt","TRANSPORT_STARTED","TRANSPORT_STOPPED","DEFAULT_BPM_VALUE","DEFAULT_SWING_VALUE","DEFAULT_SWING_SUBDIVISION_VALUE","DEFAULT_TIME_SIGNATURE_VALUE","MIN_TICKS","MAX_TICKS","PPQN","constants","ToneTransportProvider","Tone","_ticks","_beats","_bars","emit","engine","_timeSignature","scheduleRepeat","_tickHandler","validBars","Array","isArray","length","includes","value","Math","round","validSubdivisions","_validateTimeSignature","EventEmmiter","ToneMetronomeProvider","time","synth","triggerAttackRelease","Synth","oscillator","type","modulationFrequency","envelope","attack","decay","sustain","release","repeatEachBarSubdivision","_repeatHandler"],"mappings":"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"}